<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style2.css" />
    <link rel="stylesheet" href="header.css" />
    <link rel="stylesheet" href="generals.css" />
    <link rel="stylesheet" href="footer.css" />

    <link rel="icon" type="image/png" href="images/MDamida-logo.png" />
    <link rel="shortcut icon" href="images/MDamida-logo.png" type="image/png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <title>MD femme</title>
  </head>

  <body>
    <header class="navbar">
      <div class="menu">
        <strong onclick="location.href = 'index.html'">
          <i class="fa fa-home"></i>
        </strong>
      </div>
      <h3><strong>FEMME</strong></h3>
      <div
        class="cart"
        onclick="location.href = 'cart.html'"
        style="cursor: pointer"
      >
        ðŸ›’ <span class="badge" id="cartCount"></span>
      </div>
    </header>

    <div class="categories">
      <div class="flex">
        <div class="category" id="complet" style="cursor: pointer">
          <img
            src="https://i.pinimg.com/736x/14/53/d6/1453d6257cef86c8df230d353fedc953.jpg"
            alt=""
          />
          <p>Complet</p>
        </div>
        <div class="category" id="haut" style="cursor: pointer">
          <img
            src="https://i.pinimg.com/1200x/4b/86/de/4b86de51b3a3dd30390ed2dfbc79e37c.jpg"
            alt=""
          />
          <p>Haut</p>
        </div>
        
        <div class="category" id="bas" style="cursor: pointer">
          <img
            src="https://i.pinimg.com/736x/d3/a1/59/d3a159741b4cb38ca501c71bdf09ebae.jpg"
            alt=""
          />
          <p>Bas</p>
        </div>

         <div class="category" id="robe" style="cursor: pointer">
          <img
            src="https://i.pinimg.com/1200x/7c/98/56/7c9856e58aed9d5e8458c43b5ea59ee6.jpg" 
            alt=""
          />
          <p>Robe</p>
        </div>

         <div class="category" id="abaya" style="cursor: pointer">
          <img
            src="https://i.pinimg.com/736x/bf/c4/97/bfc497dcea38b16e8b811de83fef28d1.jpg"
            alt=""
          />
          <p>Abaya</p>
        </div>

        <div class="category" id="lingerie" style="cursor: pointer">
          <img
            src="https://i.pinimg.com/736x/0a/a8/ae/0aa8ae7da1214b66a4ad1ef8541c1e75.jpg"
            alt=""
          />
          <p>Lingerie</p>
        </div>
       
      </div>
    </div>
    <p id="pTrie">Trier : <strong id="trieMessage"> </strong></p>
    <p id="articlesDisponible"></p>
<section class="products" id="productsContainer">

    </section>

    <footer>
      <p>
        Â© <span id="year"></span> My Dressing by Amida.<br />All rights
        reserved.
      </p>
    </footer>
    <script>
      
function getCategoryClasses(product) {
  const classes = [];

  // Add main category
  if (product.category) {
    classes.push(product.category.toLowerCase());
  }

  if (product.type) {
    classes.push(product.type.toLowerCase())
  }

  if (product.options?.size) {
    product.options.size.forEach(size => {
      classes.push(size.toLowerCase());
    });
  }

  if (product.options?.color) {
    product.options.color.forEach(color => {
      classes.push(color.toLowerCase());
    });
  }

  return classes.join(" "); // <- this is OK here
}


      fetch("/api/products")
        .then(res => res.json())
        .then(products => {
          const container = document.getElementById("productsContainer");
          Object.values(products)
            .filter(p => p.category === "Femme") // filtrage par page
            .forEach(p => {
              const div = document.createElement("div");
              div.className = `product details ${getCategoryClasses(p)}`;
              div.dataset.id = p.id;
              div.innerHTML = `
                <img src="${p.image}" alt="${p.name}" />
                <div class="info">
                  <div class="price">$${p.price}</div>
                  <button onclick="location.href='product.html?id=${p.id}'">Voir produit</button>
                </div>
              `;
              container.appendChild(div);
            });
            const categories = {
                  haut: document.querySelectorAll(".haut"),
                  bas: document.querySelectorAll(".bas"),
                  chaussure: document.querySelectorAll(".chaussure"),
                  accessoires: document.querySelectorAll(".accessoire"),
                  abaya: document.querySelectorAll(".abaya"),
                  complet: document.querySelectorAll(".complet"),
                  habitmuslim: document.querySelectorAll(".habitmuslim"),
                  maquillage: document.querySelectorAll(".maquillage"),
                  skincare: document.querySelectorAll(".skincare"),
                  fragrance: document.querySelectorAll(".fragrance"),
                  haircare: document.querySelectorAll(".haircare"),
                  lunette: document.querySelectorAll(".lunettes"),
                  montre: document.querySelectorAll(".montre"),
                  sac: document.querySelectorAll(".sac"),
                  bracha: document.querySelectorAll(".bracha"),
                  phone: document.querySelectorAll(".phone"),

                };
        });
    </script>
    <script src="filter.js"></script>
    <script src="cart.js"></script>
    <script src="cart-core.js"></script>
    <script src="product-link.js"></script>
  </body>
</html>
